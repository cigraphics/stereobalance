#!/bin/bash
## This script sends commands to Arduino

## Initialize output pins
gpio mode 4 out;
gpio mode 5 out;
input=0;
gpio write 4 0;
gpio write 5 0;
while :
	do
		input=$(cat direction.txt);
		case "$input" in:
			1) gpio write 4 1;  ## Phone tilted forward -> go forward
			   gpio write 5 0;;
			0) gpio write 4 0;  ## Phone horizontal -> stop
			   gpio write 5 0;;
			-1) gpio write 4 0; ## Phone tilted backwards -> go backwards
			    gpio write 5 1;;
			*) ## When functioning in normal parameters, the loop should never get here
			   echo "Wrong input, command reading process might have failed.";
			   echo "Exiting";
			   gpio write 4 0;
			   gpio write 5 0;
			   exit;;
		esac;
done
